{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6e02563a_465c059e",
        "filename": "drivers/spi/spi-s3c64xx.c",
        "patchSetId": 7
      },
      "lineNbr": 1670,
      "author": {
        "id": 1150933
      },
      "writtenOn": "2022-04-13T20:22:43Z",
      "side": 1,
      "message": "Not sure if this is in scope for this change, but I\u0027m thinking we can just rely on the SPI framework to set num_chipselect to the number of cs-gpios it finds in the DT. I suggest removing the field num_cs from s3c64xx_spi_info and every occurrence where it is used.\n\nIn the function spi_get_gpio_descs(), we have this code:\n\n\tnb \u003d gpiod_count(dev, \"cs\");\n\tif (nb \u003c 0) {\n\t\t/* No GPIOs at all is fine, else return the error */\n\t\tif (nb \u003d\u003d -ENOENT)\n\t\t\treturn 0;\n\t\treturn nb;\n\t}\n\n\tctlr-\u003enum_chipselect \u003d max_t(int, nb, ctlr-\u003enum_chipselect);\n\nSo ctlr-\u003enum_chipselect is already set by the framework.",
      "revId": "30a9f63309e5ad0383725c084864d7ceeeeedf67",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e7555575_9b9a5a1b",
        "filename": "drivers/spi/spi-s3c64xx.c",
        "patchSetId": 7
      },
      "lineNbr": 1670,
      "author": {
        "id": 1557540
      },
      "writtenOn": "2022-04-13T22:07:28Z",
      "side": 1,
      "message": "Done. I kept the instance below because it will print the parsed value from the SPI core driver. I verified this.",
      "parentUuid": "6e02563a_465c059e",
      "revId": "30a9f63309e5ad0383725c084864d7ceeeeedf67",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a98e63ef_2136156d",
        "filename": "drivers/spi/spi-s3c64xx.c",
        "patchSetId": 7
      },
      "lineNbr": 1670,
      "author": {
        "id": 1150933
      },
      "writtenOn": "2022-04-13T22:15:58Z",
      "side": 1,
      "message": "I would recommend removing the field num_cs from struct s3c64xx_spi_info, because, at this point, it doesn\u0027t serve any purpose any more. I would also remove the num-cs property from all relevant device tree source files.",
      "parentUuid": "e7555575_9b9a5a1b",
      "revId": "30a9f63309e5ad0383725c084864d7ceeeeedf67",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "80c9643b_3cc39cc7",
        "filename": "drivers/spi/spi-s3c64xx.c",
        "patchSetId": 7
      },
      "lineNbr": 1670,
      "author": {
        "id": 1557540
      },
      "writtenOn": "2022-04-13T22:35:20Z",
      "side": 1,
      "message": "Okay, I\u0027m fine with that since it\u0027s kind of related to this gpio stuff, but honestly I\u0027ve picked through this driver for the past week or so and there is a bunch of unused code, e.g. dma_mode is always off, secure-mode is never used, num-cs isn\u0027t used. We really should just be using the upstream version and pushing our differences there. I was able to get this driver stripped down to 3 main differences from upstream. All of that is out-of-scope for this patch which is just fixing the probe issue for the audio device. Any other clean-up should be handled in follow up patches.",
      "parentUuid": "a98e63ef_2136156d",
      "revId": "30a9f63309e5ad0383725c084864d7ceeeeedf67",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}
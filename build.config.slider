DEVICE_MODULES_DIR=${KERNEL_DIR}
 # This project should be nested inside a kernel tree
KERNEL_DIR="gs/kernel"

. ${ROOT_DIR}/${DEVICE_MODULES_DIR}/build.config.gs101

MAKE_GOALS="$MAKE_GOALS
modules
dtbs
"

BUILD_DTBO_IMG=1
MKDTIMG_FLAGS="--page_size=4096 --id=/:board_id --rev=/:board_rev"
MKDTIMG_DTBOS="
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-oriole.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-oriole-evt1_1.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-oriole-evt1.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-oriole-evt-wingboard.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-oriole-proto1_1.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-oriole-proto1.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-raven.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-raven-evt1_1.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-raven-evt1.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-raven-evt-wingboard.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-raven-proto1_1.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-raven-proto1.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-slider2.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-slider2-o6r4.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-slider.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-whitefin2.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-whitefin2v2.dtbo
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-whitefin.dtbo
"

FILES="
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-a0.dtb
${KBUILD_EXT_TREE}/arch/arm64/boot/dts/google/gs101-b0.dtb
"

if [ -z "$MIXED_BUILD" ]; then
FILES="$FILES
$DEVICE_KERNEL_FILES
"
fi

MODULES_LIST=${DEVICE_MODULES_DIR}/vendor_boot_modules.slider

VENDOR_RAMDISK_CMDS="modify_vendor_ramdisk"
function modify_vendor_ramdisk() {
  ln -f init.recovery.gs101.rc init.recovery.slider.rc
  ln -f init.recovery.gs101.rc init.recovery.whitefin.rc
  ln -f init.recovery.gs101.rc init.recovery.oriole.rc
  ln -f init.recovery.gs101.rc init.recovery.raven.rc
}

EXT_MODULES+="
gs/google-modules/display/samsung
gs/google-modules/wlan/bcmdhd4389
gs/google-modules/gpu/mali_pixel
gs/google-modules/gpu/mali_kbase
gs/google-modules/lwis
gs/google-modules/edgetpu/drivers/edgetpu
gs/google-modules/bms
gs/google-modules/amplifiers/drv2624
gs/google-modules/amplifiers/cs40l25
gs/google-modules/amplifiers/cs35l41
gs/google-modules/amplifiers/audiometrics
gs/google-modules/aoc
gs/google-modules/aoc/alsa
gs/google-modules/touch/common
gs/google-modules/touch/fts/ftm5
gs/google-modules/touch/sec
gs/google-modules/power/reset
gs/google-modules/bluetooth/broadcom
gs/google-modules/nfc
"
#gs/google-modules/aoc/usb
